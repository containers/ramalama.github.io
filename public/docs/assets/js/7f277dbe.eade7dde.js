"use strict";(globalThis.webpackChunkdocsite=globalThis.webpackChunkdocsite||[]).push([[787],{5267:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"commands/ramalama/rag","title":"rag","description":"generate and convert Retrieval Augmented Generation (RAG) data from provided documents into an OCI Image","source":"@site/docs/commands/ramalama/rag.mdx","sourceDirName":"commands/ramalama","slug":"/commands/ramalama/rag","permalink":"/docs/commands/ramalama/rag","draft":false,"unlisted":false,"editUrl":"https://github.com/containers/ramalama/edit/main/docsite/commands/ramalama/rag.mdx","tags":[],"version":"current","frontMatter":{"title":"rag","description":"generate and convert Retrieval Augmented Generation (RAG) data from provided documents into an OCI Image"},"sidebar":"docs","previous":{"title":"push","permalink":"/docs/commands/ramalama/push"},"next":{"title":"rm","permalink":"/docs/commands/ramalama/rm"}}');var r=a(4848),s=a(8453);const i={title:"rag",description:"generate and convert Retrieval Augmented Generation (RAG) data from provided documents into an OCI Image"},o="rag",l={},d=[{value:"Synopsis",id:"synopsis",level:2},{value:"Description",id:"description",level:2},{value:"Options",id:"options",level:2},{value:"<strong>--env</strong>=",id:"--env",level:4},{value:"<strong>--format</strong>=<em>json</em> |  <em>markdown</em> | <em>qdrant</em> |",id:"--formatjson---markdown--qdrant-",level:4},{value:"<strong>--help</strong>, <strong>-h</strong>",id:"--help--h",level:4},{value:"<strong>--image</strong>=IMAGE",id:"--imageimage",level:4},{value:"<strong>--keep-groups</strong>",id:"--keep-groups",level:4},{value:"<strong>--network</strong>=<em>none</em>",id:"--networknone",level:4},{value:"<strong>--ocr</strong>",id:"--ocr",level:4},{value:"<strong>--pull</strong>=<em>policy</em>",id:"--pullpolicy",level:4},{value:"<strong>--selinux</strong>=<em>true</em>",id:"--selinuxtrue",level:4},{value:"Examples",id:"examples",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"rag",children:"rag"})}),"\n",(0,r.jsx)(n.h2,{id:"synopsis",children:"Synopsis"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ramalama rag"})," [options] [path ...] image"]}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"Generate RAG data from provided documents and convert into an OCI Image. This command uses a specific container image containing the docling\ntool to convert the specified content into a RAG vector database. If the image does not exist locally, RamaLama will pull the image\ndown and launch a container to process the data."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"this command does not work without a container engine."})}),"\n",(0,r.jsx)(n.p,{children:"positional arguments:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"PATH"}),"    Files/Directory containing PDF, DOCX, PPTX, XLSX, HTML,\nAsciiDoc & Markdown formatted files to be processed.\nCan be specified multiple times."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"DESTINATION"}),"   Path or OCI Image name to contain processed rag data"]}),"\n",(0,r.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,r.jsxs)(n.h4,{id:"--env",children:[(0,r.jsx)(n.strong,{children:"--env"}),"="]}),"\n",(0,r.jsx)(n.p,{children:"Set environment variables inside of the container."}),"\n",(0,r.jsx)(n.p,{children:"This option allows arbitrary environment variables that are available for the\nprocess to be launched inside of the container. If an environment variable is\nspecified without a value, the container engine checks the host environment\nfor a value and set the variable only if it is set on the host."}),"\n",(0,r.jsxs)(n.h4,{id:"--formatjson---markdown--qdrant-",children:[(0,r.jsx)(n.strong,{children:"--format"}),"=",(0,r.jsx)(n.em,{children:"json"})," |  ",(0,r.jsx)(n.em,{children:"markdown"})," | ",(0,r.jsx)(n.em,{children:"qdrant"})," |"]}),"\n",(0,r.jsx)(n.p,{children:"Convert documents into the following formats"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"json"}),(0,r.jsx)(n.td,{children:"JavaScript Object Notation. lightweight format for exchanging data"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"markdown"}),(0,r.jsx)(n.td,{children:"Lightweight markup language using plain text editing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qdrant"}),(0,r.jsx)(n.td,{children:"Retrieval-Augmented Generation (RAG) Vector database Qdrant distribution"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"milvus"}),(0,r.jsx)(n.td,{children:"Retrieval-Augmented Generation (RAG) Vector database Milvus distribution"})]})]})]}),"\n",(0,r.jsxs)(n.h4,{id:"--help--h",children:[(0,r.jsx)(n.strong,{children:"--help"}),", ",(0,r.jsx)(n.strong,{children:"-h"})]}),"\n",(0,r.jsx)(n.p,{children:"Print usage message"}),"\n",(0,r.jsxs)(n.h4,{id:"--imageimage",children:[(0,r.jsx)(n.strong,{children:"--image"}),"=IMAGE"]}),"\n",(0,r.jsxs)(n.p,{children:["OCI container image to run with specified AI model. RamaLama defaults to using\nimages based on the accelerator it discovers. For example:\n",(0,r.jsx)(n.code,{children:"quay.io/ramalama/ramalama-rag"}),". See the table below for all default images.\nThe default image tag is based on the minor version of the RamaLama package.\nVersion 0.15.0 of RamaLama pulls an image with a ",(0,r.jsx)(n.code,{children:":0.15"})," tag from the quay.io/ramalama OCI repository. The --image option overrides this default."]}),"\n",(0,r.jsxs)(n.p,{children:["The default can be overridden in the ramalama.conf file or via the\nRAMALAMA_IMAGE environment variable. ",(0,r.jsx)(n.code,{children:"export RAMALAMA_IMAGE=quay.io/ramalama/aiimage:1.2"})," tells\nRamaLama to use the ",(0,r.jsx)(n.code,{children:"quay.io/ramalama/aiimage:1.2"})," image."]}),"\n",(0,r.jsx)(n.p,{children:"Accelerated images:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Accelerator"}),(0,r.jsx)(n.th,{children:"Image"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CPU, Apple"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/ramalama-rag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"HIP_VISIBLE_DEVICES"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/rocm-rag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CUDA_VISIBLE_DEVICES"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/cuda-rag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ASAHI_VISIBLE_DEVICES"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/asahi-rag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"INTEL_VISIBLE_DEVICES"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/intel-gpu-rag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ASCEND_VISIBLE_DEVICES"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/cann-rag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"MUSA_VISIBLE_DEVICES"}),(0,r.jsx)(n.td,{children:"quay.io/ramalama/musa-rag"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"--keep-groups",children:(0,r.jsx)(n.strong,{children:"--keep-groups"})}),"\n",(0,r.jsx)(n.p,{children:"pass --group-add keep-groups to podman (default: False)\nIf GPU device on host system is accessible to user via group access, this option leaks the groups into the container."}),"\n",(0,r.jsxs)(n.h4,{id:"--networknone",children:[(0,r.jsx)(n.strong,{children:"--network"}),"=",(0,r.jsx)(n.em,{children:"none"})]}),"\n",(0,r.jsx)(n.p,{children:"sets the configuration for network namespaces when handling RUN instructions"}),"\n",(0,r.jsx)(n.h4,{id:"--ocr",children:(0,r.jsx)(n.strong,{children:"--ocr"})}),"\n",(0,r.jsx)(n.p,{children:"Sets the Docling OCR flag. OCR stands for Optical Character Recognition and is used to extract text from images within PDFs converting it into raw text that an LLM can understand. This feature is useful if the PDF's one is converting has a lot of embedded images with text. This process uses a great amount of RAM so the default is false."}),"\n",(0,r.jsxs)(n.h4,{id:"--pullpolicy",children:[(0,r.jsx)(n.strong,{children:"--pull"}),"=",(0,r.jsx)(n.em,{children:"policy"})]}),"\n",(0,r.jsxs)(n.p,{children:["Pull image policy. The default is ",(0,r.jsx)(n.strong,{children:"missing"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"always"}),": Always pull the image and throw an error if the pull fails."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"missing"}),": Only pull the image when it does not exist in the local containers storage. Throw an error if no image is found and the pull fails."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"never"}),": Never pull the image but use the one from the local containers storage. Throw an error when no image is found."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"newer"}),": Pull if the image on the registry is newer than the one in the local containers storage. An image is considered to be newer when the digests are different. Comparing the time stamps is prone to errors. Pull errors are suppressed if a local image was found."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"--selinuxtrue",children:[(0,r.jsx)(n.strong,{children:"--selinux"}),"=",(0,r.jsx)(n.em,{children:"true"})]}),"\n",(0,r.jsx)(n.p,{children:"Enable SELinux container separation"}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ ramalama rag ./README.md https://github.com/containers/podman/blob/main/README.md quay.io/rhatdan/myrag\n100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588|  114.00 KB/    0.00 B 922.89 KB/s   59m 59s\nBuilding quay.io/ramalama/myrag...\nadding vectordb...\nc857ebc65c641084b34e39b740fdb6a2d9d2d97be320e6aa9439ed0ab8780fe0\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ ramalama rag --ocr README.md https://mysight.edu/document quay.io/rhatdan/myrag\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ ramalama rag --format markdown /tmp/internet.pdf /tmp/output\n$ ls /tmp/output/docs/tmp/\n/tmp/output/docs/tmp/internet.md\n$ ramalama rag --format json /tmp/internet.pdf /tmp/output\n$ ls /tmp/output/docs/tmp/\n/tmp/output/docs/tmp/internet.md\n/tmp/output/docs/tmp/internet.json\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/docs/commands/ramalama/",children:"ramalama(1)"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.em,{children:["Dec 2024, Originally compiled by Dan Walsh <",(0,r.jsx)(n.a,{href:"mailto:dwalsh@redhat.com",children:"dwalsh@redhat.com"}),">"]})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var t=a(6540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);