"use strict";(globalThis.webpackChunkdocsite=globalThis.webpackChunkdocsite||[]).push([[807],{6735:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"configuration/ramalama-oci","title":"OCI Spec","description":"Configuration file reference","source":"@site/docs/configuration/ramalama-oci.mdx","sourceDirName":"configuration","slug":"/configuration/ramalama-oci","permalink":"/docs/configuration/ramalama-oci","draft":false,"unlisted":false,"editUrl":"https://github.com/containers/ramalama/edit/main/docsite/configuration/ramalama-oci.mdx","tags":[],"version":"current","frontMatter":{"title":"OCI Spec","description":"Configuration file reference"},"sidebar":"docs","previous":{"title":"Configuration File","permalink":"/docs/configuration/conf"},"next":{"title":"Platform Guides","permalink":"/docs/category/platform-guides"}}');var t=a(4848),o=a(8453);const r={title:"OCI Spec",description:"Configuration file reference"},s="OCI Spec",c={},l=[{value:"Model Data",id:"model-data",level:2},{value:"Metadata",id:"metadata",level:2},{value:"Local Image Storage",id:"local-image-storage",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"oci-spec",children:"OCI Spec"})}),"\n",(0,t.jsx)(n.h1,{id:"description",children:"DESCRIPTION"}),"\n",(0,t.jsxs)(n.p,{children:["RamaLama\u2019s ",(0,t.jsx)(n.code,{children:"oci://"})," transport uses ",(0,t.jsx)(n.a,{href:"https://github.com/opencontainers/distribution-spec",children:"OpenContainers image registries"})," to store AI models."]}),"\n",(0,t.jsxs)(n.p,{children:["Each model is stored in an ordinary ",(0,t.jsx)(n.a,{href:"https://github.com/opencontainers/image-spec",children:"container image"})," (currently not using a specialized OCI artifact)."]}),"\n",(0,t.jsx)(n.p,{children:"The image is, structurally, a single-platform image (the top-level element is an OCI Image Manifest, not an OCI Image Index)."}),"\n",(0,t.jsx)(n.h2,{id:"model-data",children:"Model Data"}),"\n",(0,t.jsx)(n.p,{children:"Because the AI model is stored in an image, not an artifact, the data is, like in all OCI images, wrapped in the standard tar layer format."}),"\n",(0,t.jsxs)(n.p,{children:["The contents of the image must contain a ",(0,t.jsx)(n.code,{children:"/models/model.file"})," file (or, usually, a symbolic link),\nwhich contains an AI model in GGUF format (consumable by ",(0,t.jsx)(n.code,{children:"llama-server"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"metadata",children:"Metadata"}),"\n",(0,t.jsxs)(n.p,{children:["The image\u2019s config contains an ",(0,t.jsx)(n.code,{children:"org.containers.type"})," label. The value of the label can be one of:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ai.image.model.raw"}),": The image contains only the AI model"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ai.image.model.car"}),": The image also contains other software; more details of that software are currently unspecified in this document."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"local-image-storage",children:"Local Image Storage"}),"\n",(0,t.jsx)(n.p,{children:"The model image may be pulled into, or created in, Podman\u2019s local image storage."}),"\n",(0,t.jsxs)(n.p,{children:["In such a situation, to simplify identification of AI models,\nthe model image may be wrapped in an OCI index pointing at the AI model image,\nand in the index, the manifests\u2019 descriptor pointing at the AI model image contains an ",(0,t.jsx)(n.code,{children:"org.cnai.model.model"})," annotation."]}),"\n",(0,t.jsx)(n.p,{children:"Note that the wrapping in an OCI index does not happen in all situations,\nand in particular does not happen when RamaLama uses Docker instead of Podman."})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>s});var i=a(6540);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);