"use strict";(globalThis.webpackChunkdocsite=globalThis.webpackChunkdocsite||[]).push([[252],{2254:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"platform-guides/musa","title":"musa","description":"Platform-specific setup guide","source":"@site/docs/platform-guides/musa.mdx","sourceDirName":"platform-guides","slug":"/platform-guides/musa","permalink":"/docs/platform-guides/musa","draft":false,"unlisted":false,"editUrl":"https://github.com/containers/ramalama/edit/main/docsite/platform-guides/musa.mdx","tags":[],"version":"current","frontMatter":{"title":"musa","description":"Platform-specific setup guide"},"sidebar":"docs","previous":{"title":"macos","permalink":"/docs/platform-guides/macos"},"next":{"title":"Commands","permalink":"/docs/category/commands"}}');var i=n(4848),a=n(8453);const r={title:"musa",description:"Platform-specific setup guide"},o="musa",l={},d=[{value:"Install the MT Linux Driver",id:"install-the-mt-linux-driver",level:2},{value:"Install the MT Container Toolkit",id:"install-the-mt-container-toolkit",level:2},{value:"Setting Up MUSA Support",id:"setting-up-musa-support",level:2},{value:"Testing the Setup",id:"testing-the-setup",level:2},{value:"MUSA_VISIBLE_DEVICES",id:"musa_visible_devices",level:3}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"musa",children:"musa"})}),"\n",(0,i.jsx)(t.h1,{id:"setting-up-ramalama-with-musa-support-on-linux-systems",children:"Setting Up RamaLama with MUSA Support on Linux systems"}),"\n",(0,i.jsx)(t.p,{children:"This guide walks through the steps required to set up RamaLama with MUSA support."}),"\n",(0,i.jsx)(t.h2,{id:"install-the-mt-linux-driver",children:"Install the MT Linux Driver"}),"\n",(0,i.jsxs)(t.p,{children:["Download the appropriate ",(0,i.jsx)(t.a,{href:"https://developer.mthreads.com/sdk/download/musa",children:"MUSA SDK"})," and follow the installation instructions provided in the ",(0,i.jsx)(t.a,{href:"https://docs.mthreads.com/musa-sdk/musa-sdk-doc-online/install_guide#2%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85",children:"MT Linux Driver installation guide"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"install-the-mt-container-toolkit",children:"Install the MT Container Toolkit"}),"\n",(0,i.jsxs)(t.p,{children:["Obtain the latest ",(0,i.jsx)(t.a,{href:"https://developer.mthreads.com/sdk/download/CloudNative",children:"MT CloudNative Toolkits"})," and follow the installation instructions provided in the ",(0,i.jsx)(t.a,{href:"https://docs.mthreads.com/cloud-native/cloud-native-doc-online/install_guide/#%E6%91%A9%E5%B0%94%E7%BA%BF%E7%A8%8B%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E5%A5%97%E4%BB%B6",children:"MT Container Toolkit installation guide"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"setting-up-musa-support",children:"Setting Up MUSA Support"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"$ (cd /usr/bin/musa && sudo ./docker setup $PWD)\n$ docker info | grep mthreads\nRuntimes: mthreads mthreads-experimental runc\nDefault Runtime: mthreads\n"})}),"\n",(0,i.jsx)(t.h2,{id:"testing-the-setup",children:"Testing the Setup"}),"\n",(0,i.jsx)(t.h1,{id:"test-the-installation",children:(0,i.jsx)(t.strong,{children:"Test the Installation"})}),"\n",(0,i.jsx)(t.p,{children:"Run the following command to verify setup:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"docker run --rm --env MTHREADS_VISIBLE_DEVICES=all ubuntu:22.04 mthreads-gmi\n"})}),"\n",(0,i.jsx)(t.h1,{id:"expected-output",children:(0,i.jsx)(t.strong,{children:"Expected Output"})}),"\n",(0,i.jsx)(t.p,{children:"Verify everything is configured correctly, with output similar to this:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",children:"Thu May 15 01:53:39 2025\n---------------------------------------------------------------\n    mthreads-gmi:2.0.0           Driver Version:3.0.0\n---------------------------------------------------------------\nID   Name           |PCIe                |%GPU  Mem\n     Device Type    |Pcie Lane Width     |Temp  MPC Capable\n                                         |      ECC Mode\n+-------------------------------------------------------------+\n0    MTT S80        |00000000:01:00.0    |0%    3419MiB(16384MiB)\n     Physical       |16x(16x)            |59C   YES\n                                         |      N/A\n---------------------------------------------------------------\n\n---------------------------------------------------------------\nProcesses:\nID   PID       Process name                         GPU Memory\n                                                         Usage\n+-------------------------------------------------------------+\n   No running processes found\n---------------------------------------------------------------\n"})}),"\n",(0,i.jsx)(t.h3,{id:"musa_visible_devices",children:"MUSA_VISIBLE_DEVICES"}),"\n",(0,i.jsxs)(t.p,{children:["RamaLama respects the ",(0,i.jsx)(t.code,{children:"MUSA_VISIBLE_DEVICES"})," environment variable if it's already set in your environment. If not set, RamaLama will default to using all the GPU detected by mthreads-gmi."]}),"\n",(0,i.jsx)(t.p,{children:"You can specify which GPU devices should be visible to RamaLama by setting this variable before running RamaLama commands:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'export MUSA_VISIBLE_DEVICES="0,1"  # Use GPUs 0 and 1\nramalama run granite\n'})}),"\n",(0,i.jsx)(t.p,{children:"This is particularly useful in multi-GPU systems where you want to dedicate specific GPUs to different workloads."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.em,{children:["May 2025, Originally compiled by Xiaodong Ye <",(0,i.jsx)(t.a,{href:"mailto:yeahdongcn@gmail.com",children:"yeahdongcn@gmail.com"}),">"]})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(6540);const i={},a=s.createContext(i);function r(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);